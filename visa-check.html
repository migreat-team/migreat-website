<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visa Quick Check - MiGreat Germany</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        [x-cloak] { display: none !important; }
        .gradient-bg {
            background: linear-gradient(135deg, #dc2626 0%, #eab308 100%);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen py-12 px-4" x-data="visaChecker()">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8">
                <a href="index.html" class="inline-flex items-center text-red-600 hover:text-red-700 mb-4">
                    <i data-lucide="arrow-left" class="h-5 w-5 mr-2"></i>
                    Back to Home
                </a>
                <h1 class="text-4xl font-bold text-gray-900 mb-4">German Work Visa Survey</h1>
                <p class="text-xl text-gray-600">Find out which German work visa you're eligible for</p>
            </div>

            <!-- Progress Bar -->
            <div class="mb-8" x-show="!showResults">
                <div class="flex justify-between text-sm text-gray-600 mb-2">
                    <span>Question <span x-text="currentQuestion"></span> of 9</span>
                    <span x-text="Math.round((currentQuestion / 9) * 100) + '% Complete'"></span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="gradient-bg h-2 rounded-full transition-all duration-300" 
                         :style="`width: ${(currentQuestion / 9) * 100}%`"></div>
                </div>
            </div>

            <!-- Questions -->
            <div class="bg-white rounded-lg shadow-lg p-8" x-show="!showResults" x-cloak>
                <!-- Question 1: Age -->
                <div x-show="currentQuestion === 1">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">What is your age?</h2>
                    <p class="text-gray-600 mb-6">Age affects eligibility and points for certain visa types</p>
                    <div class="space-y-3">
                        <button @click="answer('age', 'under35', 2)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.age === 'under35' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Under 35 years old
                        </button>
                        <button @click="answer('age', '35-40', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.age === '35-40' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            35-40 years old
                        </button>
                        <button @click="answer('age', 'over40', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.age === 'over40' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Over 40 years old
                        </button>
                    </div>
                </div>

                <!-- Question 2: Degree Recognition -->
                       <div x-show="currentQuestion === 2">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Is your tertiary / university / vocational degree recognized?</h2>
                    <p class="text-gray-600 mb-6">Recognition is important for many visa types</p>
                    <p class="text-sm text-gray-500 mb-4">Do not know if your degree is recognized? <a href="degree-check.html" class="text-red-600 hover:underline">Check here directly</a></p>
                    <div class="space-y-3">
                        <button @click="answer('degreeRecognized', 'yes', 3)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.degreeRecognized === 'yes' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Yes, my degree is recognized
                        </button>
                        <button @click="answer('degreeRecognized', 'no', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.degreeRecognized === 'no' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            No, my degree is not recognized
                        </button>
                        <button @click="answer('degreeRecognized', 'unknown', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.degreeRecognized === 'unknown' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            I don't know / not applicable
                        </button>
                    </div>
                </div>

                <!-- Question 3: Field of Work -->
                <div x-show="currentQuestion === 3">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">What field is your degree in?</h2>
                    <div class="space-y-3">
                        <button @click="answer('field', 'it', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'it' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            IT & Technology
                        </button>
                        <button @click="answer('field', 'healthcare', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'healthcare' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Healthcare & Nursing
                        </button>
                        <button @click="answer('field', 'engineering', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'engineering' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Engineering (Mechanical, Electrical, Civil)
                        </button>
                        <button @click="answer('field', 'stem', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'stem' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            STEM (Math, Physics, Chemistry)
                        </button>
                        <button @click="answer('field', 'trades', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'trades' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Skilled Trades (Electrician, Plumber, HVAC)
                        </button>
                        <button @click="answer('field', 'construction', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'construction' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Construction & Logistics
                        </button>
                        <button @click="answer('field', 'social', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'social' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Social Services (Childcare, Social Work)
                        </button>
                        <button @click="answer('field', 'other', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.field === 'other' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Other / Not applicable
                        </button>
                    </div>
                </div>

                <!-- Question 4: Work Experience -->
                <div x-show="currentQuestion === 4">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">How many years of work experience do you have?</h2>
                    <p class="text-gray-600 mb-6">Experience in your field matters for visa eligibility</p>
                    <div class="space-y-3">
                        <button @click="answer('experience', '5plus', 2)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.experience === '5plus' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            5+ years
                        </button>
                        <button @click="answer('experience', '2-5', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.experience === '2-5' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            2-5 years
                        </button>
                        <button @click="answer('experience', 'less2', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.experience === 'less2' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Less than 2 years
                        </button>
                    </div>
                </div>

                <!-- Question 5: German Language Skills -->
                <div x-show="currentQuestion === 5">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">What is your German language level?</h2>
                    <p class="text-gray-600 mb-6">According to the official CEFR/Goethe classification scale and certifications:<br>A1 (basic) – A2 (simple) – B1 (independent) – B2 (fluent) – C1 (advanced)</p>
                    <div class="space-y-3">
                        <button @click="answer('germanLevel', 'b2plus', 3)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.germanLevel === 'b2plus' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            B2 or higher
                        </button>
                        <button @click="answer('germanLevel', 'b1', 2)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.germanLevel === 'b1' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            B1
                        </button>
                        <button @click="answer('germanLevel', 'a2', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.germanLevel === 'a2' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            A2
                        </button>
                        <button @click="answer('germanLevel', 'a1', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.germanLevel === 'a1' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            A1
                        </button>
                        <button @click="answer('germanLevel', 'none', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.germanLevel === 'none' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            No German skills
                        </button>
                    </div>
                </div>

                <!-- Question 6: English Language Skills -->
                <div x-show="currentQuestion === 6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">What is your English language level?</h2>
                    <p class="text-gray-600 mb-6">English proficiency can help for certain positions</p>
                    <div class="space-y-3">
                        <button @click="answer('englishLevel', 'fluent', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.englishLevel === 'fluent' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Fluent / Native
                        </button>
                        <button @click="answer('englishLevel', 'intermediate', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.englishLevel === 'intermediate' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Intermediate
                        </button>
                        <button @click="answer('englishLevel', 'basic', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.englishLevel === 'basic' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Basic or none
                        </button>
                    </div>
                </div>

                <!-- Question 7: Job Offer -->
                <div x-show="currentQuestion === 7">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Do you have a job offer from a German employer?</h2>
                    <p class="text-gray-600 mb-6">A job offer significantly improves your visa options</p>
                    <div class="space-y-3">
                        <button @click="answer('jobOffer', 'yes', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.jobOffer === 'yes' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Yes, I have a job offer
                        </button>
                        <button @click="answer('jobOffer', 'no', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.jobOffer === 'no' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            No, I'm still looking
                        </button>
                    </div>
                </div>

                <!-- Question 8: Salary (if job offer) -->
                <div x-show="currentQuestion === 8 && answers.jobOffer === 'yes'">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">What is the annual salary offered?</h2>
                    <p class="text-gray-600 mb-6">Salary level determines eligibility for certain visa types</p>
                    <div class="space-y-3">
                        <button @click="answer('salary', 'high', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.salary === 'high' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            €58,400+ (EU Blue Card threshold)
                        </button>
                        <button @click="answer('salary', 'medium', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.salary === 'medium' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            €45,300 - €58,400
                        </button>
                        <button @click="answer('salary', 'low', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.salary === 'low' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Below €45,300
                        </button>
                    </div>
                </div>

                <!-- Question 9: Spouse -->
                <div x-show="currentQuestion === 9 || (currentQuestion === 8 && answers.jobOffer === 'no')">
                    <h2 class="text-2xl font-bold text-gray-900 mb-2">Will your spouse apply for a job seeker visa?</h2>
                    <p class="text-gray-600 mb-2">Your spouse can also apply for the <strong>Opportunity Card</strong></p>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <p class="text-sm text-blue-900">
                            <strong>What is the Opportunity Card?</strong><br>
                            The Opportunity Card (Chancenkarte) is a points-based job-seeking visa that allows you to come to Germany for up to 1 year to search for employment. You need at least 6 points based on qualifications, experience, language skills, and age.
                        </p>
                    </div>
                    <div class="space-y-3">
                        <button @click="answer('spouse', 'yes', 1)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.spouse === 'yes' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            Yes, my spouse will apply
                        </button>
                        <button @click="answer('spouse', 'no', 0)" 
                                class="w-full text-left p-4 border-2 rounded-lg hover:border-red-600 transition"
                                :class="answers.spouse === 'no' ? 'border-red-600 bg-red-50' : 'border-gray-200'">
                            No / Not applicable
                        </button>
                    </div>
                </div>

                <!-- Question 10 removed - Financial Resources -->

                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-8">
                    <button @click="previousQuestion()" 
                            x-show="currentQuestion > 1"
                            class="px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition">
                        Previous
                    </button>
                    <div x-show="currentQuestion === 1"></div>
                    <button @click="nextQuestion()" 
                            x-show="currentQuestion < 10 && hasAnswer()"
                            class="px-6 py-3 gradient-bg text-white font-semibold rounded-lg hover:opacity-90 transition">
                        Next
                    </button>
                    <button @click="calculateResults()" 
                            x-show="currentQuestion === 10 && hasAnswer()"
                            class="px-6 py-3 gradient-bg text-white font-semibold rounded-lg hover:opacity-90 transition">
                        See Results
                    </button>
                </div>
            </div>

            <!-- Results -->
            <div x-show="showResults" x-cloak>
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Your Visa Assessment Results</h2>
                    <p class="text-gray-600 mb-6">Based on your responses, here are your visa options</p>

                    <!-- Opportunity Card Points (if eligible) -->
                    <div x-show="opportunityCardPoints >= 6" class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                        <div class="flex items-start">
                            <i data-lucide="check-circle" class="h-6 w-6 text-green-600 mr-3 flex-shrink-0 mt-1"></i>
                            <div>
                                <h3 class="text-lg font-bold text-green-900 mb-2">
                                    Opportunity Card Points: <span x-text="opportunityCardPoints"></span>
                                </h3>
                                <p class="text-green-800">
                                    Congratulations! You meet the minimum 6 points requirement.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Not enough points message -->
                    <div x-show="opportunityCardPoints < 6 && opportunityCardPoints > 0" class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6">
                        <div class="flex items-start">
                            <i data-lucide="alert-circle" class="h-6 w-6 text-yellow-600 mr-3 flex-shrink-0 mt-1"></i>
                            <div>
                                <h3 class="text-lg font-bold text-yellow-900 mb-2">
                                    Opportunity Card Points: <span x-text="opportunityCardPoints"></span>
                                </h3>
                                <p class="text-yellow-800 mb-3">
                                    You need <span x-text="6 - opportunityCardPoints"></span> more points to qualify for the Opportunity Card.
                                </p>
                                <p class="text-sm text-yellow-700">
                                    <strong>How to get more points:</strong><br>
                                    • Improve German language skills to B2+ level (+1 point)<br>
                                    • Gain more work experience (2-5 years: +1 point, 5+ years: +2 points)<br>
                                    • Get your degree recognized (+3 points)<br>
                                    • Apply before age 35 (+2 points) or before 40 (+1 point)
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Not recognized degree message -->
                    <div x-show="answers.degreeRecognized === 'no'" class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                        <div class="flex items-start">
                            <i data-lucide="info" class="h-6 w-6 text-blue-600 mr-3 flex-shrink-0 mt-1"></i>
                            <div>
                                <h3 class="text-lg font-bold text-blue-900 mb-2">Degree Not Recognized?</h3>
                                <p class="text-blue-800">
                                    Sad that your qualification is not automatically recognized? But don't worry, candidates with 2-year degrees that are recognized in their home country are eligible for the opportunity card visa! Most times you can even apply online to get your degree fully or partially recognized while still abroad. If you want to go ahead, fill our survey under 
                                    <a href="https://docs.google.com/forms/d/1LcyfLhhQoBr2FyHhsk9DyxHymTxrGn1tPZw3hFZQl_M/viewform" target="_blank" class="font-semibold underline hover:text-blue-900">"Get started"</a>!
                                </p>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-2xl font-bold text-gray-900 mb-4">Eligible Visa Types</h3>

                    <!-- Visa Options -->
                    <div class="space-y-6">
                        <!-- EU Blue Card -->
                        <div x-show="eligibleVisas.includes('euBlueCard')" class="border-2 border-blue-500 rounded-lg p-6">
                            <div class="flex items-start mb-4">
                                <i data-lucide="check-circle" class="h-6 w-6 text-blue-600 mr-3 flex-shrink-0 mt-1"></i>
                                <div>
                                    <h4 class="text-xl font-bold text-blue-900 mb-1">EU Blue Card</h4>
                                    <p class="text-gray-600">High-skilled worker visa with fast-track to permanent residence</p>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-6">
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Requirements Met:</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Recognized degree
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Job offer with €58,400+ salary
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Qualification matches job
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Duration:</h5>
                                    <p class="text-sm text-gray-700">Up to 4 years (extendable)</p>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Key Benefits:</h5>
                                    <ul class="space-y-1 text-sm text-gray-700">
                                        <li>• Permanent residence after 33 months</li>
                                        <li>• Family reunification</li>
                                        <li>• Work anywhere in EU after 18 months</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Skilled Worker Visa -->
                        <div x-show="eligibleVisas.includes('skilledWorker')" class="border-2 border-green-500 rounded-lg p-6">
                            <div class="flex items-start mb-4">
                                <i data-lucide="check-circle" class="h-6 w-6 text-green-600 mr-3 flex-shrink-0 mt-1"></i>
                                <div>
                                    <h4 class="text-xl font-bold text-green-900 mb-1">Skilled Worker Visa</h4>
                                    <p class="text-gray-600">Standard work visa for qualified professionals</p>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-6">
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Requirements Met:</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Recognized degree
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Job offer from German employer
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Qualification matches job
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Duration:</h5>
                                    <p class="text-sm text-gray-700">Up to 4 years (extendable)</p>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Key Benefits:</h5>
                                    <ul class="space-y-1 text-sm text-gray-700">
                                        <li>• Permanent residence after 4 years</li>
                                        <li>• Family reunification</li>
                                        <li>• Job change possible</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Opportunity Card -->
                        <div x-show="eligibleVisas.includes('opportunityCard')" class="border-2 border-yellow-500 rounded-lg p-6">
                            <div class="flex items-start mb-4">
                                <i data-lucide="check-circle" class="h-6 w-6 text-yellow-600 mr-3 flex-shrink-0 mt-1"></i>
                                <div>
                                    <h4 class="text-xl font-bold text-yellow-900 mb-1">Opportunity Card</h4>
                                    <p class="text-gray-600">Job-seeking visa with points-based system</p>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-6">
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Requirements Met:</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Minimum 6 points (you have <span x-text="opportunityCardPoints"></span>)
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Basic qualification
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Financial resources
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Duration:</h5>
                                    <p class="text-sm text-gray-700">1 year (extendable)</p>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Key Benefits:</h5>
                                    <ul class="space-y-1 text-sm text-gray-700">
                                        <li>• Job search time</li>
                                        <li>• Part-time work allowed (20h/week)</li>
                                        <li>• Trial work permitted</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Job Training Visa (Ausbildung) -->
                        <div x-show="eligibleVisas.includes('jobTraining')" class="border-2 border-purple-500 rounded-lg p-6">
                            <div class="flex items-start mb-4">
                                <i data-lucide="check-circle" class="h-6 w-6 text-purple-600 mr-3 flex-shrink-0 mt-1"></i>
                                <div>
                                    <h4 class="text-xl font-bold text-purple-900 mb-1">Job Training Visa (Ausbildung)</h4>
                                    <p class="text-gray-600">Vocational training program combining work and learning</p>
                                </div>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-6">
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Requirements Met:</h5>
                                    <ul class="space-y-1 text-sm">
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Age requirement (typically under 40)
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            No degree recognition needed
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            B1 German language level
                                        </li>
                                        <li class="flex items-center text-green-700">
                                            <i data-lucide="check" class="h-4 w-4 mr-2"></i>
                                            Training contract required
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Duration:</h5>
                                    <p class="text-sm text-gray-700">2-3 years (training period)</p>
                                </div>
                                <div>
                                    <h5 class="font-bold text-gray-900 mb-2">Key Benefits:</h5>
                                    <ul class="space-y-1 text-sm text-gray-700">
                                        <li>• Earn while you learn (€800-1,200/month)</li>
                                        <li>• Recognized qualification after completion</li>
                                        <li>• Path to skilled worker visa</li>
                                        <li>• No tuition fees</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Requirements Disclaimer (only for Opportunity Card) -->
                    <div x-show="eligibleVisas.includes('opportunityCard')" class="bg-blue-50 border border-blue-200 rounded-lg p-6 mt-6">
                        <div class="flex items-start">
                            <i data-lucide="info" class="h-6 w-6 text-blue-600 mr-3 flex-shrink-0 mt-1"></i>
                            <div>
                                <h3 class="text-lg font-bold text-blue-900 mb-2">Important: Financial Requirements</h3>
                                <p class="text-blue-800 mb-3">
                                    For the Opportunity Card, you must demonstrate financial resources of at least <strong>€1,091 per month</strong> through one of these options:
                                </p>
                                <ul class="space-y-2 text-sm text-blue-800">
                                    <li class="flex items-start">
                                        <i data-lucide="check" class="h-4 w-4 text-green-600 mr-2 flex-shrink-0 mt-0.5"></i>
                                        <div>
                                            <strong>Blocked Bank Account:</strong><br>
                                            Deposit the full amount (€13,092 for 12 months) in a German blocked account
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <i data-lucide="check" class="h-4 w-4 text-green-600 mr-2 flex-shrink-0 mt-0.5"></i>
                                        <div>
                                            <strong>Declaration of Commitment:</strong><br>
                                            Have someone in Germany guarantee your financial support
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <i data-lucide="check" class="h-4 w-4 text-green-600 mr-2 flex-shrink-0 mt-0.5"></i>
                                        <div>
                                            <strong>Job Offer:</strong><br>
                                            Employment contract with monthly salary of at least €1,091
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- No eligible visas -->
                    <div x-show="eligibleVisas.length === 0" class="bg-gray-50 border border-gray-200 rounded-lg p-6">
                        <div class="flex items-start">
                            <i data-lucide="info" class="h-6 w-6 text-gray-600 mr-3 flex-shrink-0 mt-1"></i>
                            <div>
                                <h3 class="text-lg font-bold text-gray-900 mb-2">No Immediate Visa Match</h3>
                                <p class="text-gray-700 mb-3">
                                    Based on your current situation, you don't meet the requirements for the main work visas. However, you have options:
                                </p>
                                <ul class="space-y-2 text-sm text-gray-700">
                                    <li>• Improve your German language skills to B2 level</li>
                                    <li>• Get your degree recognized through individual assessment</li>
                                    <li>• Gain more work experience in your field</li>
                                    <li>• Consider vocational training programs in Germany</li>
                                </ul>
                                <p class="text-gray-700 mt-4">
                                    <a href="https://docs.google.com/forms/d/1LcyfLhhQoBr2FyHhsk9DyxHymTxrGn1tPZw3hFZQl_M/viewform" target="_blank" class="text-red-600 hover:text-red-700 font-semibold">Contact us</a> for personalized guidance on your path to Germany.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- CTA Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 mt-8">
                        <a href="https://docs.google.com/forms/d/1LcyfLhhQoBr2FyHhsk9DyxHymTxrGn1tPZw3hFZQl_M/viewform" target="_blank" 
                           class="flex-1 inline-flex items-center justify-center px-6 py-3 gradient-bg text-white font-semibold rounded-lg hover:opacity-90 transition">
                            Get Started with MiGreat
                            <i data-lucide="arrow-right" class="ml-2 h-5 w-5"></i>
                        </a>
                        <button @click="reset()" 
                                class="flex-1 inline-flex items-center justify-center px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition">
                            Take Assessment Again
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function visaChecker() {
            return {
                currentQuestion: 1,
                showResults: false,
                answers: {
                    age: '',
                    degreeRecognized: '',
                    field: '',
                    experience: '',
                    germanLevel: '',
                    englishLevel: '',
                    jobOffer: '',
                    salary: '',
                    spouse: '',
                },
                opportunityCardPoints: 0,
                eligibleVisas: [],
                
                answer(question, value, points) {
                    this.answers[question] = value;
                    
                    // Auto-advance to next question after short delay
                    setTimeout(() => {
                        this.nextQuestion();
                    }, 300);
                },
                
                hasAnswer() {
                    const questionMap = {
                        1: 'age',
                        2: 'degreeRecognized',
                        3: 'field',
                        4: 'experience',
                        5: 'germanLevel',
                        6: 'englishLevel',
                        7: 'jobOffer',
                        8: this.answers.jobOffer === 'yes' ? 'salary' : 'spouse',
                        9: 'spouse'
                    };
                    
                    const currentKey = questionMap[this.currentQuestion];
                    return this.answers[currentKey] !== '';
                },
                
                nextQuestion() {
                    if (!this.hasAnswer()) return;
                    
                    // If at question 9, show results
                    if (this.currentQuestion === 9) {
                        this.calculateResults();
                        return;
                    }
                    
                    // Skip salary question if no job offer
                    if (this.currentQuestion === 7 && this.answers.jobOffer === 'no') {
                        this.currentQuestion = 9;
                    } else if (this.currentQuestion < 9) {
                        this.currentQuestion++;
                    }
                },
                
                previousQuestion() {
                    // Skip back over salary question if no job offer
                    if (this.currentQuestion === 9 && this.answers.jobOffer === 'no') {
                        this.currentQuestion = 7;
                    } else if (this.currentQuestion > 1) {
                        this.currentQuestion--;
                    }
                },
                
                calculateResults() {
                    // Calculate Opportunity Card points
                    let points = 0;
                    
                    // Age points
                    if (this.answers.age === 'under35') points += 2;
                    else if (this.answers.age === '35-40') points += 1;
                    
                    // Degree recognition points
                    if (this.answers.degreeRecognized === 'yes') points += 3;
                    
                    // Field points (shortage occupation)
                    if (['it', 'healthcare', 'engineering'].includes(this.answers.field)) points += 1;
                    
                    // Experience points
                    if (this.answers.experience === '5plus') points += 2;
                    else if (this.answers.experience === '2-5') points += 1;
                    
                    // German language points
                    if (this.answers.germanLevel === 'b2plus') points += 3;
                    else if (this.answers.germanLevel === 'b1') points += 2;
                    else if (this.answers.germanLevel === 'a2') points += 1;
                    
                    // English language points
                    if (this.answers.englishLevel === 'fluent') points += 1;
                    
                    // Spouse points
                    if (this.answers.spouse === 'yes') points += 1;
                    
                    this.opportunityCardPoints = points;
                    
                    // Determine eligible visas
                    this.eligibleVisas = [];
                    
                    // EU Blue Card
                    if (this.answers.degreeRecognized === 'yes' && 
                        this.answers.jobOffer === 'yes' && 
                        this.answers.salary === 'high') {
                        this.eligibleVisas.push('euBlueCard');
                    }
                    
                    // Skilled Worker Visa
                    if (this.answers.degreeRecognized === 'yes' && 
                        this.answers.jobOffer === 'yes') {
                        this.eligibleVisas.push('skilledWorker');
                    }
                    
                    // Opportunity Card
                    // If degree is fully recognized, eligible immediately
                    if (this.answers.degreeRecognized === 'yes') {
                        this.eligibleVisas.push('opportunityCard');
                    }
                    // If degree not recognized, need 6+ points
                    else if (points >= 6) {
                        this.eligibleVisas.push('opportunityCard');
                    }
                    
                    // Job Training Visa (Ausbildung)
                    // Eligible if under 40 years old AND has B1 German
                    const hasB1German = ['b2Plus', 'b1'].includes(this.answers.germanLevel);
                    if ((this.answers.age === 'under35' || this.answers.age === '35-40') && hasB1German) {
                        this.eligibleVisas.push('jobTraining');
                    }
                    
                    this.showResults = true;
                    lucide.createIcons();
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                },
                
                reset() {
                    this.currentQuestion = 1;
                    this.showResults = false;
                    this.answers = {
                        age: '',
                        degreeRecognized: '',
                        field: '',
                        experience: '',
                        germanLevel: '',
                        englishLevel: '',
                        jobOffer: '',
                        salary: '',
                        spouse: '',
                    };
                    this.opportunityCardPoints = 0;
                    this.eligibleVisas = [];
                    lucide.createIcons();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }
        }
        
        // Initialize Lucide icons
        document.addEventListener('alpine:initialized', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html>

